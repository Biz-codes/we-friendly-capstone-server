CREATE TABLE users (
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    name VARCHAR(255) NOT NULL,
    username VARCHAR(255) NOT NULL,
    password VARCHAR(255) NOT NULL
);

CREATE TABLE businesses (
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    category VARCHAR(255) NOT NULL,
    name VARCHAR(255) NOT NULL,
    address VARCHAR(255),
    city VARCHAR(255) NOT NULL,
    state TEXT NOT NULL,
    website VARCHAR(255)
);

CREATE TABLE reviews (
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    reviewer_id INTEGER REFERENCES users(id) ON DELETE CASCADE NOT NULL,
    business_id INTEGER REFERENCES businesses(id) ON DELETE CASCADE NOT NULL,
    date_modified TIMESTAMPTZ NOT NULL DEFAULT now(),
    friendly_for VARCHAR(255) NOT NULL,
    rating INTEGER NOT NULL,
    review VARCHAR(255)
);

CREATE TABLE saved_businesses (
    id INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    user_id INTEGER REFERENCES users(id) ON DELETE CASCADE NOT NULL,
    business_id INTEGER REFERENCES businesses(id) ON DELETE CASCADE NOT NULL
);